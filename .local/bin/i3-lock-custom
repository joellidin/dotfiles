#!/usr/bin/env bash
# i3-lock-custom

set -euo pipefail

WALL="$HOME/.local/share/bg"          # symlink to your background
CACHE="$HOME/.cache/betterlockscreen" # where the processed image lives
EFFECTS="blur,pixel"                  # lockâ€‘screen look
BLUR_STRENGTH="1.05"                   # blur amount

# (Re)build cache only if it doesn't exist or wallpaper is newer
if [[ ! -d "$CACHE" || "$WALL" -nt "$CACHE" ]]; then
    betterlockscreen -u "$WALL" --fx "$EFFECTS" --blur "$BLUR_STRENGTH"
fi

# Lock with the cached image
betterlockscreen -l blur
